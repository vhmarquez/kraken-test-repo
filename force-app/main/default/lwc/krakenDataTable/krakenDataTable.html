<template>
    <lightning-card title="Kraken Data Table" icon-name="standard:scan_card">
        <template if:true={error}>
            <div class="slds-m-around_medium">
                <p>{error}</p>
            </div>
        </template>
        <template if:true={hasColumns}>
            <lightning-input type="search" label="Search" variant="label-inline" onchange={handleSearch} class="slds-m-bottom_small"></lightning-input>
            <lightning-datatable
                key-field="Id"
                data={filteredData}
                columns={columns}
                sorted-by={sortedBy}
                sorted-direction={sortedDirection}
                onsort={handleSort}
                hide-checkbox-column
                draft-values={draftValues}
                onsave={handleSave}
                onrowaction={handleRowAction}>
            </lightning-datatable>
            <div class="slds-m-top_medium slds-align_absolute-center">
                <lightning-button
                    variant="neutral"
                    label="Previous"
                    disabled={isPreviousDisabled}
                    onclick={handlePrevious}>
                </lightning-button>
                <span class="slds-m-horizontal_small">Page {currentPage} of {totalPages}</span>
                <lightning-button
                    variant="neutral"
                    label="Next"
                    disabled={isNextDisabled}
                    onclick={handleNext}>
                </lightning-button>
            </div>
        </template>
        <template if:false={hasColumns}>
            <div class="slds-m-around_medium">
                <p>Please configure the object and fields in the Experience Builder.</p>
            </div>
        </template>
    </lightning-card>
</template>